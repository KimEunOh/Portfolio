:root {
  /* Color Palette - Using the new palette from index.html's example */
  --background: rgba(250, 250, 250, 1);
  --body-text: rgba(128, 128, 128, 1);
  --cancel: rgba(252, 99, 99, 1);
  --process: rgba(255, 181, 70, 1);
  --stroke: rgba(238, 238, 238, 1);
  --success: rgba(6, 198, 152, 1);
  --title-color: rgba(17, 17, 17, 1); /* Renamed from --title */
  --white: rgba(255, 255, 255, 1);
  --primaryhigh: rgba(139, 147, 115, 1);
  --primarylight: rgba(228, 230, 222, 1);
  --primarymedium: rgba(195, 199, 183, 1);
  --secondaryhigh: rgba(244, 167, 84, 1);
  --secondarylight: rgba(253, 243, 231, 1);
  --secondarymedium: rgba(249, 206, 159, 1);

  /* Typography - Using Space Grotesk from index.html's example */
  --caption-4-font-family: "Space Grotesk", Helvetica, sans-serif;
  --caption-4-font-weight: 400;
  --caption-4-font-size: 12px;
  --caption-4-letter-spacing: 0px;
  --caption-4-line-height: 16px;
  --caption-3-font-family: "Space Grotesk", Helvetica, sans-serif;
  --caption-3-font-weight: 700;
  --caption-3-font-size: 12px;
  --caption-3-letter-spacing: 0px;
  --caption-3-line-height: 16px;
  --caption-2-font-family: "Space Grotesk", Helvetica, sans-serif;
  --caption-2-font-weight: 400;
  --caption-2-font-size: 14px;
  --caption-2-letter-spacing: 0px;
  --caption-2-line-height: 16px;
  --caption-1-font-family: "Space Grotesk", Helvetica, sans-serif;
  --caption-1-font-weight: 700;
  --caption-1-font-size: 14px;
  --caption-1-letter-spacing: 0px;
  --caption-1-line-height: 22px;
  --body-font-family: "Space Grotesk", Helvetica, sans-serif;
  --body-font-weight: 400;
  --body-font-size: 16px;
  --body-letter-spacing: 0px;
  --body-line-height: 23px;
  --headline-font-family: "Space Grotesk", Helvetica, sans-serif;
  --headline-font-weight: 700;
  --headline-font-size: 16px;
  --headline-letter-spacing: 0px;
  --headline-line-height: 23px;
  --title-4-font-family: "Space Grotesk", Helvetica, sans-serif;
  --title-4-font-weight: 400;
  --title-4-font-size: 18px;
  --title-4-letter-spacing: 0px;
  --title-4-line-height: 26px;
  --title-3-font-family: "Space Grotesk", Helvetica, sans-serif;
  --title-3-font-weight: 700;
  --title-3-font-size: 18px;
  --title-3-letter-spacing: 0px;
  --title-3-line-height: 26px;
  --title-2-font-family: "Space Grotesk", Helvetica, sans-serif;
  --title-2-font-weight: 700;
  --title-2-font-size: 20px;
  --title-2-letter-spacing: 0px;
  --title-2-line-height: 34px;
  --title-1-font-family: "Space Grotesk", Helvetica, sans-serif;
  --title-1-font-weight: 700;
  --title-1-font-size: 24px;
  --title-1-letter-spacing: 0px;
  --title-1-line-height: 38px;
  
  /* Spacing (using consistent naming) */
  --spacing-xs: 0.25rem; /* 4px */
  --spacing-sm: 0.5rem;  /* 8px */
  --spacing-md: 1rem;    /* 16px */
  --spacing-lg: 1.5rem;  /* 24px */
  --spacing-xl: 2rem;    /* 32px */
  --spacing-xxl: 3rem;   /* 48px */

  /* Borders */
  --border-width: 1px;
  --border-radius-sm: .2rem;
  --border-radius: .25rem; /* Consistent with index.html's new theme: 6px or 0.3rem */
  --border-radius-lg: .3rem;

  /* Box Shadow */
  --box-shadow-sm: 0 .125rem .25rem rgba(0, 0, 0, .075);
  --box-shadow: 0 .5rem 1rem rgba(0, 0, 0, .15); /* More subtle shadow */
  --box-shadow-lg: 0 1rem 3rem rgba(0, 0, 0, .175);
  
  --input-focus-shadow: 0 0 0 0.2rem rgba(139, 147, 115, 0.25); /* Using primaryhigh for focus */
}

/* Minimal Reset & Global Box Sizing - Assuming Meyer Reset is imported in HTML or here if needed */
/* @import url("https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css"); */
/* If not in HTML, uncomment above. For now, assuming it's in index.html's <style> */

*,
*::before,
*::after {
  box-sizing: border-box;
  -webkit-font-smoothing: antialiased; /* Moved from index.html */
}

html {
  font-family: var(--body-font-family);
  line-height: var(--body-line-height);
  -webkit-text-size-adjust: 100%;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  height: 100%; /* Added from index.html */
  margin: 0; /* Added from index.html */
}

body {
  font-family: var(--body-font-family);
  font-size: var(--body-font-size);
  font-weight: var(--body-font-weight);
  line-height: var(--body-line-height);
  color: var(--body-text);
  background-color: var(--background);
  margin: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: var(--spacing-md);
  height: 100%; /* Added from index.html */
}

.container { /* Matches styling from index.html more closely */
  width: 90%; 
  max-width: 900px; /* Consistent with index.html */
  margin: var(--spacing-md) auto;
  background-color: var(--white);
  padding: var(--spacing-lg);
  border-radius: var(--border-radius-lg);
  box-shadow: var(--box-shadow);
}

h1 { /* Using title-1 style from the new theme for consistency */
  font-family: var(--title-1-font-family);
  font-weight: var(--title-1-font-weight);
  font-size: var(--title-1-font-size);
  line-height: var(--title-1-line-height);
  color: var(--primaryhigh);
  text-align: center;
  margin-bottom: var(--spacing-lg);
}

/* General Label Styling - from index.html for consistency */
label {
    font-family: var(--headline-font-family);
    font-weight: var(--headline-font-weight);
    font-size: var(--headline-font-size);
    line-height: var(--headline-line-height);
    color: var(--title-color);
    display: block;
    margin-bottom: var(--spacing-xs);
}

/* Form container - can be removed if not used, or adapted */
.form-container {
  display: flex;
  gap: var(--spacing-lg);
  margin-bottom: var(--spacing-lg);
}

.input-area,
.result-area-container { /* These might need to be adapted or removed if structure changes */
  flex: 1;
  padding: var(--spacing-lg);
  background-color: var(--white);
  border: var(--border-width) solid var(--stroke);
  border-radius: var(--border-radius-lg);
}

/* Generic input, textarea, select styling - from index.html */
textarea,
input[type="text"],
input[type="date"],
input[type="number"],
input[type="email"], /* Added email for completeness */
select {
    width: 100%;
    padding: 10px 12px;
    margin-bottom: var(--spacing-md);
    border-radius: var(--border-radius-lg); /* Slightly larger radius for inputs */
    border: var(--border-width) solid var(--stroke);
    box-sizing: border-box;
    font-family: var(--body-font-family);
    font-size: var(--body-font-size);
    color: var(--body-text);
    background-color: var(--white);
}
textarea:focus,
input[type="text"]:focus,
input[type="date"]:focus,
input[type="number"]:focus,
input[type="email"]:focus,
select:focus {
    border-color: var(--primaryhigh);
    box-shadow: var(--input-focus-shadow);
    outline: none;
}

textarea#user_input { /* Specific to the main textarea in index.html if it exists */
  min-height: 150px;
  /* Other styles inherited or use the generic textarea style above */
}


/* 버튼 공통 스타일 - adapting .btn from provided style.css */
.btn {
  display: inline-block;
  font-family: var(--headline-font-family);
  font-weight: var(--headline-font-weight);
  font-size: var(--headline-font-size);
  color: var(--white);
  text-align: center;
  vertical-align: middle;
  cursor: pointer;
  user-select: none;
  background-color: var(--primaryhigh);
  border: var(--border-width) solid var(--primaryhigh);
  padding: 10px 18px;
  line-height: var(--headline-line-height);
  border-radius: var(--border-radius-lg);
  transition: background-color .2s ease-in-out, border-color .2s ease-in-out, box-shadow .2s ease-in-out;
}

.btn:hover {
  background-color: rgba(120, 128, 100, 1); /* Darker primaryhigh */
  border-color: rgba(120, 128, 100, 1);
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.btn-primary { /* Assuming this is the default button style */
  /* .btn already covers much of this, primaryhigh is the base */
}

.btn-success {
  background-color: var(--success);
  border-color: var(--success);
}

.btn-success:hover {
  background-color: rgba(5, 170, 130, 1); /* Darker success */
  border-color: rgba(5, 170, 130, 1);
}

.btn:focus, .btn.focus {
  /* Generic focus from index.html handles outline, specific shadow for buttons if needed */
  box-shadow: var(--input-focus-shadow); 
  outline: none; /* Ensure default outline is removed if custom shadow is applied */
}


/* 결과 영역 (result_area in index.html) */
#result_area { /* Style for the div where HTML templates are injected */
  margin-top: var(--spacing-md);
  padding: var(--spacing-md);
  background-color: var(--background); /* Use main background for this area */
  border: var(--border-width) solid var(--stroke);
  border-radius: var(--border-radius-lg);
  min-height: 200px;
  overflow-x: auto;
}

/* Card style for injected forms (if they use a .card structure) */
#result_area .card {
  border: var(--border-width) solid var(--stroke);
  padding: var(--spacing-lg);
  margin-bottom: var(--spacing-lg);
  border-radius: var(--border-radius-lg);
  background-color: var(--white);
  box-shadow: var(--box-shadow-sm);
}

#result_area .card h2 { /* Headers inside the injected form cards */
  font-family: var(--title-2-font-family);
  font-weight: var(--title-2-font-weight);
  font-size: var(--title-2-font-size);
  color: var(--title-color);
  margin-top: 0;
  margin-bottom: var(--spacing-md);
  border-bottom: 1px solid var(--stroke);
  padding-bottom: var(--spacing-sm);
}

#result_area .card label { /* Labels inside injected form cards */
  font-family: var(--caption-1-font-family);
  font-weight: var(--caption-1-font-weight);
  font-size: var(--caption-1-font-size);
  color: var(--title-color);
  margin-top: var(--spacing-md);
  margin-bottom: var(--spacing-xs);
}

/* Form controls inside result_area cards - using more specific typography */
#result_area .card input[type="text"],
#result_area .card input[type="date"],
#result_area .card input[type="number"],
#result_area .card input[type="email"],
#result_area .card textarea,
#result_area .card select {
  font-family: var(--caption-2-font-family);
  font-size: var(--caption-2-font-size);
  padding: var(--spacing-sm) var(--spacing-md);
  background-color: var(--background); /* Slightly different bg for these inputs */
  /* Inherits other styles from generic input, textarea, select */
}

#result_area .card textarea { 
  min-height: 80px;
  resize: vertical;
}

/* Item sets (e.g., for purchase items) */
#result_area .item-set, 
#result_area .expense-item-set, 
#result_area .card-usage-item-set {
  border: var(--border-width) dashed var(--primarymedium);
  padding: var(--spacing-lg);
  margin-top: var(--spacing-lg);
  margin-bottom: var(--spacing-lg);
  border-radius: var(--border-radius-lg);
  background-color: var(--primarylight);
}

#result_area .item-set legend, /* Using legend for item set titles */
#result_area .expense-item-set legend,
#result_area .card-usage-item-set legend {
  font-family: var(--caption-1-font-family);
  font-weight: var(--caption-1-font-weight);
  font-size: var(--caption-1-font-size);
  color: var(--primaryhigh);
  padding: 0 var(--spacing-xs);
  margin-left: var(--spacing-sm);
}


.error-message {
  color: var(--cancel);
  font-family: var(--body-font-family);
  font-size: var(--body-font-size);
  font-weight: var(--body-font-weight);
  margin-top: var(--spacing-sm);
  padding: var(--spacing-md);
  background-color: rgba(252, 99, 99, 0.1); /* Light cancel */
  border: var(--border-width) solid var(--cancel);
  border-radius: var(--border-radius-lg);
}

/* 디버그 정보 스타일 - consistent with index.html's new theme */
#debug_info, /* Assuming #debugInfo from index.html might be #debug_info here */
#debugInfo { /* Covering both possibilities */
  margin-top: var(--spacing-lg);
  padding: var(--spacing-md);
  background-color: var(--primarylight);
  color: var(--body-text);
  border: var(--border-width) solid var(--stroke);
  border-radius: var(--border-radius-lg);
  max-height: 300px;
  overflow-y: auto;
}

#debug_info h3,
#debugInfo h3 { /* Headers for debug info */
  font-family: var(--title-3-font-family);
  font-weight: var(--title-3-font-weight);
  font-size: var(--title-3-font-size);
  color: var(--secondaryhigh);
  margin-top: 0;
  margin-bottom: var(--spacing-sm);
}

#debug_info pre,
#debugInfo pre {
  white-space: pre-wrap;
  word-wrap: break-word;
  font-family: var(--caption-4-font-family);
  font-size: var(--caption-4-font-size);
  line-height: var(--caption-4-line-height);
}

/* Tables injected into result_area */
#result_area table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: var(--spacing-lg);
  font-family: var(--caption-2-font-family);
  font-size: var(--caption-2-font-size);
  background-color: var(--white);
}

#result_area th,
#result_area td {
  border: var(--border-width) solid var(--primarymedium);
  padding: var(--spacing-sm) var(--spacing-md);
  text-align: left;
  vertical-align: middle;
}

#result_area th {
  background-color: var(--primarylight);
  color: var(--primaryhigh);
  font-weight: var(--caption-1-font-weight);
  text-align: center; 
}

/* Inputs within tables in result_area */
#result_area table input[type="text"],
#result_area table input[type="date"],
#result_area table input[type="number"],
#result_area table select,
#result_area table textarea {
  margin-bottom: 0; /* Remove margin for inputs in table cells */
  font-family: var(--caption-4-font-family); /* Smaller font for table inputs */
  font-size: var(--caption-4-font-size);
  padding: var(--spacing-xs) var(--spacing-sm); /* Smaller padding */
  background-color: var(--white); /* Ensure inputs are distinct from cell bg if cell has color */
}

/* Form Title inside result_area */
#result_area .form-title {
  font-family: var(--title-1-font-family);
  font-weight: var(--title-1-font-weight);
  font-size: var(--title-1-font-size);
  text-align: center;
  margin-bottom: var(--spacing-lg);
  color: var(--title-color);
}

/* Specific form headers like .dinner-expense-header */
#result_area .dinner-expense-header { /* Example specific header */
  font-family: var(--title-2-font-family);
  font-weight: var(--title-2-font-weight);
  text-align: center;
  vertical-align: middle;
  padding: var(--spacing-md);
  background-color: var(--primarylight);
  color: var(--primaryhigh);
  border-bottom: 1px solid var(--primarymedium);
}

/* Approval signature styles - .sign_type1_inline */
#result_area .sign_type1_inline {
  border: var(--border-width) solid var(--primarymedium);
  display: inline-block;
  margin-left: var(--spacing-xs);
  background-color: var(--white);
  /* Add padding and other styles if needed for content within */
}

/* Placeholder text for empty fields - .comp_item */
#result_area .comp_item {
  color: var(--body-text); /* Use standard body text color, maybe with opacity */
  opacity: 0.7;
  font-style: italic;
  font-family: var(--caption-2-font-family);
}

/* Specific width adjustments for .ipt_editor, .txta_editor */
#result_area input.ipt_editor,
#result_area textarea.txta_editor {
  /* width: calc(100% - 12px); Assuming this was for specific padding. Generic input style should handle it. */
  /* If still needed, review why 100% from generic input is not enough */
}

/* Form Group Styling - consistent with index.html if it had .form-group */
.form-group {
  margin-bottom: var(--spacing-md);
}

/* .form-group label already styled by general label selector */

/* Form Section Title (e.g., for item list headers) */
.form-section-title {
  font-family: var(--title-2-font-family); /* Using title-2 for section titles */
  font-weight: var(--title-2-font-weight);
  font-size: var(--title-2-font-size);
  color: var(--title-color);
  margin-top: var(--spacing-lg);
  margin-bottom: var(--spacing-md);
  padding-bottom: var(--spacing-sm);
  border-bottom: var(--border-width) solid var(--stroke);
}

/* Grid layout for item fields within an item-set */
.item-fields-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* Adjusted minmax for potentially smaller items */
  gap: var(--spacing-md);
}

.item-fields-grid .form-group {
  margin-bottom: 0; /* Grid gap handles spacing */
}

/* ================== Item Table Styles ================== */
.item-table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: var(--spacing-md);
}

.item-table th, .item-table td {
    border: 1px solid var(--border-color);
    padding: var(--spacing-sm);
    text-align: left;
    vertical-align: top;
}

.item-table td strong {
    display: block;
    margin-bottom: var(--spacing-xs);
    font-size: 0.9em;
    color: var(--text-color-light);
}

.two-row-table tr:not(.item-row-divider) td {
    border-bottom: none;
}

.two-row-table .item-row-divider td {
    border-top: 1px dashed var(--border-color);
    border-bottom: 2px solid var(--border-color-dark);
}

.two-row-table .item-row-divider:last-child td {
     border-bottom: 1px solid var(--border-color);
}

.item-table th {
    background-color: var(--background-color-light);
    font-weight: bold;
    text-align: center;
}

.item-table td .form-control {
    width: 100%;
    box-sizing: border-box; /* padding and border do not increase width */
}

/* --- Field-specific widths --- */
.item-table .col-date { width: 13%; }
.item-table .col-quantity, .item-table .col-amount { width: 8%; }
.item-table .col-category { width: 12%; }
.item-table .col-spec { width: 15%; }
.item-table .col-name, .item-table .col-description { width: 22%; }
.item-table .col-notes { width: auto; } /* Takes remaining space */


/* ================== Table Action Buttons ================== */
.table-actions {
/* ... existing code ... */
}

/* New Container-based table styles */
.item-container-table {
    border: none;
    border-collapse: separate;
    border-spacing: 0 var(--spacing-md);
}

.item-container-table > tbody {
    display: table; /* Ensure tbody behaves like a block for layout purposes */
    width: 100%;
    background-color: var(--background-color-light);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    /* padding is unreliable on tbody, so we remove it */
}

.item-container-table td {
    border: none;
    padding: var(--spacing-sm); /* Increased padding for better spacing inside the container */
    vertical-align: top;
}

.item-table td strong {
    display: block;
    margin-bottom: var(--spacing-xs);
}

.two-row-table .item-row-divider td {
    border-top: 1px dashed var(--border-color);
    padding-top: var(--spacing-sm); /* Add space between two rows of an item */
}

.two-row-table .item-row-divider:last-child td {
     border-bottom: 1px solid var(--border-color);
} 