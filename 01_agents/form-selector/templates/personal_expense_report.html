<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>개인경비 사용내역서</title>
    <link rel="stylesheet" href="../static/style.css">
</head>
<body>
<div class="card">
    <h2 class="form-title">개인경비 사용내역서</h2>
    <form id="personal_expense_form">
        <div class="form-group">
            <label for="title">문서 제목:</label>
            <input type="text" id="title" name="title" value="{title}" class="form-control">
        </div>


        <div class="form-group">
            <label for="usage_status">사용 현황:</label>
            <select id="usage_status" name="usage_status" class="form-control" data-selected="{usage_status}">
                <option value="">선택하세요</option>
                <option value="personal_cash">개인현금</option>
                <option value="personal_card">개인카드</option>
            </select>
        </div>

        <div class="form-group">
            <label for="total_amount_header">총 금액:</label>
            <input type="text" id="total_amount_header" name="total_amount_header" readonly class="form-control" value="{total_amount}">
        </div>

        <div class="form-group">
            <label for="expense_reason">지출 사유:</label>
            <textarea id="expense_reason" name="expense_reason" rows="4" class="form-control">{expense_reason}</textarea>
        </div>
        
        <h3 class="form-section-title">경비 사용 내역</h3>
        
        <table id="personal_expense_table" class="item-container-table">
            <tbody class="item-container">
                <!-- Item 1 -->
                <tr>
                    <td colspan="2"><strong>사용내역:</strong><br><input type="text" id="expense_description_1" name="expense_description_1" class="form-control"></td>
                    <td><strong>분류:</strong><br>
                        <select id="expense_category_1" name="expense_category_1" class="form-control">
                            <option value="">선택</option>
                            <option value="traffic">교통비</option>
                            <option value="accommodation">숙박비</option>
                            <option value="meals">식대</option>
                            <option value="entertainment">접대비</option>
                            <option value="education">교육훈련비</option>
                            <option value="supplies">소모품비</option>
                            <option value="other">기타</option>
                        </select>
                    </td>
                </tr>
                <tr class="item-row-divider">
                    <td><strong>사용일자:</strong><br><input type="date" id="expense_date_1" name="expense_date_1" class="form-control"></td>
                    <td><strong>금액:</strong><br><input type="number" id="expense_amount_1" name="expense_amount_1" class="form-control expense-amount-calc"></td>
                    <td><strong>비고:</strong><br><input type="text" id="expense_notes_1" name="expense_notes_1" class="form-control"></td>
                </tr>
            </tbody>
            <tbody class="item-container">
                <!-- Item 2 -->
                <tr>
                    <td colspan="2"><strong>사용내역:</strong><br><input type="text" id="expense_description_2" name="expense_description_2" class="form-control"></td>
                    <td><strong>분류:</strong><br>
                        <select id="expense_category_2" name="expense_category_2" class="form-control">
                            <option value="">선택</option>
                            <option value="traffic">교통비</option>
                            <option value="accommodation">숙박비</option>
                            <option value="meals">식대</option>
                            <option value="entertainment">접대비</option>
                            <option value="education">교육훈련비</option>
                            <option value="supplies">소모품비</option>
                            <option value="other">기타</option>
                        </select>
                    </td>
                </tr>
                <tr class="item-row-divider">
                    <td><strong>사용일자:</strong><br><input type="date" id="expense_date_2" name="expense_date_2" class="form-control"></td>
                    <td><strong>금액:</strong><br><input type="number" id="expense_amount_2" name="expense_amount_2" class="form-control expense-amount-calc"></td>
                    <td><strong>비고:</strong><br><input type="text" id="expense_notes_2" name="expense_notes_2" class="form-control"></td>
                </tr>
            </tbody>
            <tbody class="item-container">
                <!-- Item 3 -->
                <tr>
                    <td colspan="2"><strong>사용내역:</strong><br><input type="text" id="expense_description_3" name="expense_description_3" class="form-control"></td>
                    <td><strong>분류:</strong><br>
                        <select id="expense_category_3" name="expense_category_3" class="form-control">
                            <option value="">선택</option>
                            <option value="traffic">교통비</option>
                            <option value="accommodation">숙박비</option>
                            <option value="meals">식대</option>
                            <option value="entertainment">접대비</option>
                            <option value="education">교육훈련비</option>
                            <option value="supplies">소모품비</option>
                            <option value="other">기타</option>
                        </select>
                    </td>
                </tr>
                <tr class="item-row-divider">
                    <td><strong>사용일자:</strong><br><input type="date" id="expense_date_3" name="expense_date_3" class="form-control"></td>
                    <td><strong>금액:</strong><br><input type="number" id="expense_amount_3" name="expense_amount_3" class="form-control expense-amount-calc"></td>
                    <td><strong>비고:</strong><br><input type="text" id="expense_notes_3" name="expense_notes_3" class="form-control"></td>
                </tr>
            </tbody>
        </table>
        <div class="table-actions">
            <button type="button" id="add_row_btn" class="btn-add">+</button>
            <button type="button" id="remove_row_btn" class="btn-remove">-</button>
        </div>
        
        <div class="form-group">
            <label for="total_expense_amount">총 합계 금액:</label>
            <input type="text" id="total_expense_amount" name="total_expense_amount" readonly class="form-control">
        </div>

        <p><strong>* 영수증 별도 제출</strong></p>

    </form>
</div>
<script id="items-data" type="application/json">{items_json}</script>
<script id="approvers-data" type="application/json">{approvers_json}</script>
<script src="../static/js/dynamic-table-handler.js"></script>
<script src="../static/js/personal_expense_scripts_v2.js"></script>
</body>
</html>